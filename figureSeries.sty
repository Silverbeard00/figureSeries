%%
%% This is file `figureSeries.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% figureSeries.dtx  (with options: `package')
%% 
%% This is a generated file.
%% 
%% Copyright (C) 2014, 2015 by Thomas Weise <http://www.it-weise.de>
%% 
%% This file may be distributed and/or modified under the conditions of
%% the LaTeX Project Public License, either version 1.3 of this license
%% or (at your option) any later version. The latest version of this
%% license is in:
%% 
%%     http://www.latex-project.org/lppl.txt
%% 
%%  You can obtain the latest version of this package from
%% 
%%     http://github.com/thomasWeise/figureSeries
%% 
%%  This work is author-maintained, i.e., it can only be maintained by
%%  Thomas Weise.
%% 
\NeedsTeXFormat{LaTeX2e}[1999/12/01]
\ProvidesPackage{figureSeries}
    [2015/02/13 v0.9.4 Provides a floating, figure*-like construct that can break over multiple pages]
\newif\if@figSer@captionCompatibilityFalse%
\@figSer@captionCompatibilityFalsefalse%
\ifx\spnewtheorem\@undefined%
\else%
\@figSer@captionCompatibilityFalsetrue%
\fi%
\if@figSer@captionCompatibilityFalse%
\RequirePackage[compatibility=false]{caption}%
\else%
\RequirePackage{caption}%
\fi%
\RequirePackage{subcaption}%
\DeclareCaptionSubType*[arabic]{figure}%
\RequirePackage{afterpage}%
\long\gdef\figureSeriesElement#1#2{%
\strut\hfill\strut%
\edef\@captype{figure}%
\subcaptionbox{#1}{#2}%
\strut\hfill\strut%
}%
\global\let\@figSer@delayedCaption\@empty%
\long\gdef\figureSeriesRow#1{%
\begin{center}%
\ifx\@figSer@delayedCaption\@empty%
\vspace\abovecaptionskip%
\strut#1\strut%
\else%
\parbox[b]{\textwidth}{%
\@figSer@delayedCaption%
\global\let\@figSer@delayedCaption\@empty%
\vspace\abovecaptionskip%
\strut#1\strut%
}%
\fi%
\end{center}%
}%
\global\let\@figSer@floatingBody\@empty%
\long\def\figureSeriesHere#1#2{%
\ifx\@figSer@floatingBody\@empty%
\@figSer@detectColumns%
\if@figSer@isTwoColumns%
\@figSer@floatTwoCol{#1}{#2}%
\else%
\@figSer@print{#1}{#2}%
\fi%
\else%
\g@addto@macro{\@figSer@floatingBody}{\@figSer@print{#1}{#2}}%
\fi%
}%
\long\gdef\figureSeriesFloat#1#2{%
\ifx\@figSer@floatingBody\@empty%
\@figSer@detectColumns%
\if@figSer@isTwoColumns%
\@figSer@floatTwoCol{#1}{#2}%
\else%
\@figSer@floatOneCol{#1}{#2}%
\fi%
\else%
\g@addto@macro{\@figSer@floatingBody}{\@figSer@print{#1}{#2}}%
\fi%
}%
\long\def\@figSer@print#1#2{%
\def\@figSer@delayedCaption{%
\noindent\parbox{\textwidth}{%
\captionof{figure}{#1}%
\global\advance\c@figure by 0%
}%
\par}%
\begin{center}%
#2%
\end{center}%
\medskip%
}%
\newif\if@figSer@isTwoColumns%
\@figSer@isTwoColumnsfalse%
\def\@figSer@detectColumns{%
\@figSer@isTwoColumnsfalse%
\ifx\multicols\@undefined%
\else%
\ifnum\col@number>\@ne%
\@figSer@isTwoColumnstrue%
\fi%
\fi%
\if@twocolumn%
\@figSer@isTwoColumnstrue%
\fi%
}%
\long\def\@figSer@floatOneCol#1#2{%
\gdef\@figSer@floatingBody{\@figSer@print{#1}{#2}}%
\afterpage{%
\@figSer@floatingBody%
\global\let\@figSer@floatingBody\@empty%
}%
}%
\long\def\@figSer@floatTwoCol#1#2{%
\gdef\@figSer@floatingBody{\@figSer@print{#1}{#2}}%
\global\let\@figSer@breakBodyRepeat\@figSer@breakBodyRepeat@Orig%
\afterpage{\@figSer@deferTwoCol}%
}%
\def\@figSer@deferTwoCol{%
\if@firstcolumn%
\@figSer@breakBodyRepeat%
\else%
\afterpage{\@figSer@deferTwoCol}%
\fi%
}%
\newsavebox\@figSer@wholeBodyBox%
\newsavebox\@figSer@printBox%
\def\@figSer@breakBodyRepeat@Orig{%
\twocolumn[{%
\ifx\@figSer@floatingBody\@empty%
\else%
\global\setbox\@figSer@wholeBodyBox\vbox{\@figSer@floatingBody}%
\global\let\@figSer@floatingBody\@empty%
\fi%
\ifdim\ht\@figSer@wholeBodyBox>\textheight%
\setbox\@figSer@printBox\vsplit\@figSer@wholeBodyBox to \textheight%
\global\setbox\@figSer@wholeBodyBox\vbox{\unvbox\@figSer@wholeBodyBox}%
\box\@figSer@printBox%
\else%
\ifdim\ht\@figSer@wholeBodyBox>0.84\textheight%
\global\let\@figSer@breakBodyRepeat\clearpage%
\else%
\global\let\@figSer@breakBodyRepeat\relax%
\fi%
\unvbox\@figSer@wholeBodyBox%
\vspace{15pt plus 15pt}%
\fi%
}]%
\@figSer@breakBodyRepeat%
}%
\AtEndDocument{%
\ifx\@figSer@floatingBody\@empty%
\else%
\clearpage%
\fi%
}%
\endinput
%%
%% End of file `figureSeries.sty'.
